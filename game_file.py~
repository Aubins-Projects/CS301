import os.path
import string
import random
import copy


#these are the global variables for the system

player=dict()
player["points"]=0
player["lives"]=3
player["relive"]=1
player["Hmultiplier"]=1
player["Dmultiplier"]=1
player["x"]=10
player["y"]=10


response=""
holder=list

#
#This is what lets you put your name in and then checks your score
def namechecker():
  name=raw_input("Enter your name please \n")
  name=name.lower()
  name=name.capitalize()
  if name in ('Aubin','aubin'):
    print("Welcome your highness")
  else:
    print("Welcome: "+name +"\nGood Luck! \n")
  return name


#this is to initialize your character its commented out below for testing purposes
def initial(name, player):
  while True:
    answer2=raw_input("What is your class (warrior or fighter)? \n")
    if answer2 in ("warrior","fighter"):
      break
  answer3=100
  user=players(name,answer3,answer2)
  print("\n")
  print("Your name: "+str(user.name))
  print("Your class: "+str(user.classs))
  player=class_adaption(user.classs,player)
  print("Your health: "+str(int(user.health)*player["Hmultiplier"]))
  print("Your damage: "+str(int(user.damage)*player["Dmultiplier"]))
  return user

def class_adaption(classs,player):
  if classs=="warrior":
    player["Hmultiplier"]=2
    player["Dmultiplier"]=1
  if classs=="fighter":
    player["Hmultiplier"]=1
    player["Dmultiplier"]=2
  return player


#This is for looking specifically at one thing
def look(what):
  print(what.description)

def cool_map(words,the_lv):
  if holder[0]=="map":
    import map_function
    map_function.display(the_lv)
      



#This if for looking at the entire room
def room_contents_look(what):
  print("\n\n"+"*"*35)
  print("\tRooms Nearby:\t")
  print "*"*35
  i=0
  for x in range(len(what.contents)):
    print(what.contents[i].name)
    i=1+i
  if what.east== None:
    i=0
  else:
    print(str(what.east)+" is East"),
    if (what.east.visited==False):
      print "--Not visited yet"
    else:
      print
  if what.north== None:
    i=0
  else:
    print(str(what.north)+" is North"),
    if (what.north.visited==False):
      print "--Not visited yet"
    else:
      print
  if what.west== None:
    i=0
  else:
    print(str(what.west)+" is West"),
    if (what.west.visited==False):
      print "--Not visited yet"
    else:
      print
  if what.south== None:
    i=0
  else:
    print(str(what.south)+" is South"),
    if (what.south.visited==False):
      print "--Not visited yet"
    else:
      print
  print "*"*35
  print 


#This is the reassurance for trying to quit
def ask_ok(prompt, retries=4, complaint='Yes or no, please!'):
  while True:
    player["relive"]
    ok = raw_input( prompt + '\n')
    if ok in ('y', 'ye', 'yes'):
      print("you are alive once more!")
      player["relive"]=1
      return True
    if ok in ('n', 'no', 'nop', 'nope'):
      print("You chose to be a quitter")
      logfile = open("Highscores.txt", "a")
      logfile.write(str(player["points"])+"\t" + name+"\n")
      logfile.close()
      player["relive"]=0
      return False
    retries = retries - 1
    if retries < 0:
      print('You cannot follow instructions')
      return False
    print(complaint)

#This is part of the reassurance from above
def infunc(what_you_want_asked):
  tobeused=raw_input(what_you_want_asked)
  if not ask_ok(tobeused):
    return False
  else:
    return True

def item_randomer(thelist):
  randomnum=random.randrange(1,len(thelist.items))
  for item in thelist.items:
    if randomnum == item.uid:
      return item
      break    
def loot_size_randomer(monster,thelist):
  randonum=random.randrange(1,5)
  for num in range(0,randonum):
      monster.contents.append(item_randomer(thelist))
      
    
#This is so you can check your score with the text file
def scorecheck():
  i=0
  logfile = open("Highscores.txt", "r")
  data=logfile.readlines()
  data.sort(key=lambda l: float(l.split("\t")[0]),reverse=True)
  logfile.close()
  logfile = open("Highscores.txt", "w")
  for x in range(len(data)):
    logfile.write(data[i])
    i=i+1
  logfile.close()
  logfile = open("Highscores.txt", "r")
  print("************************** \n")
  print("The Top Scores so far are: \n")
  for x in range(0,3):
    print(logfile.readline())
  logfile.close()
  print("************************** \n")
  print("Your score is: "+ str(player["points"]))
  



#this is your starting coordinates
    


def coordinates(direction):
  for char in direction:
    global location
    sav_x=player["x"]
    sav_y=player["y"]
    
    if char in ["e"]:
       player["x"]=player["x"]+1
    elif char in ["w"]:
       player["x"]=player["x"]-1
    elif char in ["n"]:
       player["y"]=player["y"]+1
    elif char in ["s"]:
       player["y"]=player["y"]-1
    loc_finder(sav_x,sav_y)

###########################################################################################
#This is the automatic mapper once you add the grids in the room OBJECT and the floor OBJECT


def loc_finder(sav_x,sav_y):
  global location
  check =0
  for room in level1.rooms:
    if room.x==player["x"] and room.y==player["y"]:
      location= room
      check=1
      print(str(name)+", you are in the "+str(location))
      
  if check == 0:
    player["x"]=sav_x
    player["y"]=sav_y
    print str(name)+", you did not change rooms"      
  
  location.visitedFun()

def map_finder(x,y):
  for room in level1.rooms:
    if room.x==x and room.y==y:
      return room

def mapping():
  global location
  temp_location=location
  temp_x=player["x"]
  temp_y=player["y"]

  if not map_finder(temp_x-1,temp_y)==temp_location:
    location.west=map_finder(temp_x-1,temp_y)

  if not map_finder(temp_x+1,temp_y)==temp_location:
    location.east=map_finder(temp_x+1,temp_y)

  if not map_finder(temp_x,temp_y-1)==temp_location:
    location.south=map_finder(temp_x,temp_y-1)

  if not map_finder(temp_x,temp_y+1)==temp_location:
    location.north=map_finder(temp_x,temp_y+1)
  
###############################################################################################################    

#look command function
def look_command(holder):
  if holder[0] in ["look", "l"]:
    if holder[1] in ["east","e"]:
      print(location.east)
    elif holder[1] in ["west", "w"]:
      print(location.west)
    elif holder[1] in ["south","s"]:
      print(location.south)
    elif holder[1] in ["north", "n"]:
      print(location.north)
    elif holder[1]in ["around", "a"]:
      print ("\n\tAbout this place: "+location.description)
      room_contents_look(location)
      if location.baddies:
        print 
        print "*"*35
        print "Monsters in Room"
        print "*"*35
        print("Monster name: "+str(location.baddies.name))
        print("Monster health: "+str(location.baddies.health))
        print("Monster damage: "+str(location.baddies.damage))
        if location.baddies.__class__.__name__ == "Boss":
          print "\nThis monster is stronger than the rest...there might be a hidden room nearby\n"
        print "*"*35


def level_upper(monsterh,monsterd):
  global user
  totalpoints=monsterh+monsterd
  totalexp=totalpoints
  user.exp+=totalexp
  while user.exp > 500:
    user.exp-=500
    user.level+=1
    user.exp=user.exp*(100-user.level)/150
    print("\nyou just leveled up to: "+str(user.level))
    print("*"*35)
  count=0
  for r in level1.rooms:
    if r.baddies!=None:
      r.baddies.healthy()
      count+=1
  print "\nThe monsters appear to have gained strength as well!"
  print "{0} monsters remaining!\n\n".format(count)

def about_command(holder):
  if holder[0]=="about":
    if location.baddies:
      if holder[1]==location.baddies.name:
        print("Monster name: "+str(location.baddies.name))
        print("Monster health: "+str(location.baddies.health))
        print("Monster damage: "+str(location.baddies.damage))
    holder.remove("about")
    otherholder=' '.join(holder) 
    if otherholder in user.contents:
      print("in my bag")
      print(user.contents[user.contents.index(otherholder)].description)
    if otherholder in location.contents:
      print("in this room")
      print(location.contents[location.contents.index(otherholder)].description) 
      
def grab_command(holder):
  if holder[0]=="grab":
    holder.remove("grab")
    otherholder=' '.join(holder) 
    if otherholder == "all":
      for item in location.contents:
        user.contents.append(item)
        location.contents.remove(item)
        print("You just picked up something that/is: "+user.contents[user.contents.index(item)].description)
    if otherholder in location.contents:
      user.contents.append(location.contents[location.contents.index(otherholder)])
      location.contents.remove(otherholder)
      print(user.contents[user.contents.index(otherholder)].description)

def unlocked_rooms(item,loc):
  loc.x=item.x
  loc.y=item.y
  print "A room was just unlocked!"

def equip_command(holder):
  if holder[0]in ["equip","e"]:
    temp_word_holder=str(holder[0])
    holder.remove(temp_word_holder)
    otherholder=' '.join(holder)     
    if otherholder in user.contents:
      if user.contents[user.contents.index(otherholder)].equip == "shield":
        user.shield = user.contents[user.contents.index(otherholder)]
        user.contents.remove(otherholder)
        print("you just equipped a(n) "+str(otherholder)+" which "+str(user.shield.description))
      elif user.contents[user.contents.index(otherholder)].equip == "weapon":
        user.weapon = user.contents[user.contents.index(otherholder)]
        user.contents.remove(otherholder)
        print("you just equipped a(n) "+str(otherholder)+" which "+str(user.weapon.description))

def unequip_command(holder):
  if holder[0] in ["unequip", "un"]:
    temp_word_holder=str(holder[0])
    holder.remove(temp_word_holder)
    otherholder=' '.join(holder)     
    if otherholder == user.weapon:
        user.contents.append(user.weapon)
        user.weapon=None
        print("you just took off a(n) "+str(otherholder))
    elif otherholder == user.shield:
        user.contents.append(user.shield)
        user.shield=None
        print("you just took off a(n) "+str(otherholder))

def give_command(holder):
  if holder[0] == "give":
    
    if location.baddies:
      if holder[1] in user.contents:
        for item in user.contents:
          if item.name == holder[1] and location.baddies.takes.name==holder[1]:
            user.contents.remove(item)
            print "===========The monster was pacified==========="
            for item in location.baddies.contents:
              if item==None:
                break
              print "It gave you:\n"            
              print("a(n) "+str(item))
              print("\tDescription: "+str(item.description)+"\n")
              user.contents.append(item)           
            location.baddies=None
            break
          elif item.name == holder[1] and holder[1] in location.baddies.hates:
            print "===========The monster was ENRAGED==========="
            location.baddies.health*=3        
            location.baddies.damage*=3
            user.contents.remove(item)
            

def bag_command(holder):
  if holder[0]=="bag":
    import bag
    bag.main(user.contents)
    i=0
    print("*"*35)
    print "You currently have in your bag:"
    for x in range(len(user.contents)):
      print("a(n) "+str(user.contents[i]))
      i=i+1
    print("*"*35)
    print("\n"+"*"*35)
    print "You currently have equipped:"
    print("a(n) "+str(user.shield)+" as your shield")
    print("a(n) "+str(user.weapon)+" as your weapon")
    print("*"*35)
def drop_command(holder):
  if holder[0]in ["drop","d"]:
    temp_word_holder=str(holder[0])
    holder.remove(temp_word_holder)
    otherholder=' '.join(holder)
    if otherholder == "all":
      for item in user.contents:
        location.contents.append(item)
        user.contents.remove(item)
        print("you just dropped "+ str(item) + " in the " +str(location))
    if otherholder in user.contents:
      location.contents.append(user.contents[user.contents.index(otherholder)])
      user.contents.remove(otherholder)
      print("you just dropped "+ otherholder + " in the " +str(location))

def use_command(holder):
  if holder[0]in ["use","u"]:
    temp_word_holder=str(holder[0])
    holder.remove(temp_word_holder)
    otherholder=' '.join(holder)
    if (otherholder in user.contents):
      if (user.contents[user.contents.index(otherholder)].usable=="yes"):
        location.used.append(user.contents[user.contents.index(otherholder)])
        print("you just used "+ otherholder + " in the " +str(location))
        if otherholder in location.usables:
         cause_and_effect(otherholder)
      else:
        print(str(user.contents[user.contents.index(otherholder)])+" is not usable.")


def cause_and_effect(otherholder):
  global location
  if location.usables[location.usables.index(otherholder)].effect!="":
    print location.usables[location.usables.index(otherholder)].effect
  if (len(location.usables[location.usables.index(otherholder)].changer)>0):
    for item in location.usables[location.usables.index(otherholder)].changer:
      location.contents.append(item)
      location.usables[location.usables.index(otherholder)].changer.remove(item)
  if (location.usables[location.usables.index(otherholder)].world=="yes"):
    unlocked_rooms(location.usables[location.usables.index(otherholder)],location.usables[location.usables.index(otherholder)].atloc)
    if (user.contents[user.contents.index(otherholder)].destroy=="yes"):
        user.contents.remove(otherholder)


def help_command(holder):
  if holder[0]=="help":
    if len(holder)>1:
      holder.remove("help")
      otherholder=' '.join(holder)
      if otherholder in commandlist:
        for command, description in commandlist[otherholder]:
          print(command + "\t - \t" + description)
    else: 
      for command, description in commandlist.items():
        print(command + "\t - \t" + description)

      
def attack_command(holder):
  if holder[0]=="attack":
    if location.baddies:
      print"="*11+"BATTLE"+"="*11
      neitherdead=0
      if user.shield!= None:
        yourhealth=(int(user.health) + int(user.shield.power))*int(player["Hmultiplier"])*(user.level+100)/90
      else:
        yourhealth=(int(user.health))*int(player["Hmultiplier"])*(user.level+100)/90
      if user.weapon!= None:
        yourdamage=(int(user.weapon.power)+user.damage)*int(player["Dmultiplier"])*(user.level+100)/90
      else:
        yourdamage=(user.damage)*int(player["Dmultiplier"])*(user.level+100)/90
      monsterdamage=int(location.baddies.damage)
      monsterhealth=int(location.baddies.health)
      while neitherdead==0:
        monsterhealth=monsterhealth-yourdamage
        if user.weapon!= None: 
          print("you just attacked "+str(location.baddies.name) +" with: "+ str(user.weapon.name))
        else:
          print("you just attacked "+str(location.baddies.name) +" with: your mighty fists")
        if monsterhealth<1:
          print("you have just killed "+str(location.baddies.name))
          
          player["points"]=player["points"]+int(location.baddies.health)
          print"*"*35
          print("you have found :")
          for item in location.baddies.contents:
            if item==None:
              break
            
            print("a(n) "+str(item))
            print("\tDescription: "+str(item.description)+"\n")
            user.contents.append(item)
          print"*"*35
          level_upper(int(location.baddies.health),int(location.baddies.damage))
          location.baddies=None
          i=raw_input("Press Enter to continue")
          for i in range(50):
            print
          break
        yourhealth=yourhealth-monsterdamage
        print(str(location.baddies.name)+" just attacked you for: "+str(monsterdamage))
        if yourhealth<1:
          print("you have just been killed by "+str(location.baddies.name))
          player["lives"]=player["lives"]-1
          if player["lives"]<0:
            response="dfhsergghj"
            break
          print("you only have: "+str(player["lives"])+" lives/life left")
          break
        print("Your HP: "+str(int(yourhealth)))
        print(str(location.baddies.name)+"'s HP " +str(int(monsterhealth)))
      
    
#This holds ALL the functions that you could run    
def what_you_do(holder):
  global location
  if holder[0]=="go":
    coordinates(holder[1])
  use_command(holder)
  unequip_command(holder)
  drop_command(holder)  
  equip_command(holder)
  grab_command(holder)
  bag_command(holder)
  look_command(holder)
  about_command(holder)
  help_command(holder)
  attack_command(holder)
  give_command(holder)
  cool_map(holder,level1)
  if holder[0]=="points":
    scorecheck()

ALLITEMS=list()
#Your items found in game
class Object:
  def __init__(self, name, value, description, power=0, equip="item",atloc='',usable="no",world="no",destroy="no"):
    self.name=name
    self.value=value
    self.description=description
    self.power=power
    self.equip=equip
    self.usable=usable
    self.world=world
    self.x=300000
    self.y=300000
    self.atloc=atloc
    self.destroy=destroy
    self.effect=""
    self.changer=list()
    self.startup()
  def __str__(self):
    return str(self.name)

  def __eq__(self,other):
    return self.name == other
  def startup(self):
    ALLITEMS.append(self)
###################################################################################################################

#############################################################################################################

class itemlist:
  def __init__(self,name,items=list()):
    self.name=name
    self.items=items
  def __str__(self):
    return str(self.name)

############################################################################################################
#world ITEMS
# name, value, description, power, equip="item",atloc='',usable="no",world="no",destroy="no" 

i1=Object("clock",100,"time is stuck at 11:11...that is precarious, precarious indeed")
i2=Object("broom",15,"a dusting device, with a long lever")
i3=Object("feather",20,"tickles the nose when placed ever so close to it")
i4=Object("match",25,"seems to be some sort of small relative to the torches")
i5=Object("Blood Diamond",150000,"a blood diamond, formed from vast amounts of blood and a fiery explosion", 20)
i6=Object("ball", 1500, "a ball that looks like a pong ball",10)
i7=Object("King's scepter", 10000, "a silver sceptre",30)
i8=Object("vorpel sword", 200, "a strange looking sword",1000)
i9=Object("rusty spoon", 3, "a smelly metal spoon",2)
i10=Object("skull", 15000, "a giant skull",100)
i11=Object("talon", 1500, "a giant talon",100)
i12=Object("lint", 100, "a piece of lint",100)
i13=Object("scrap metal", 150, "a gold crown with many jewels",10)
i14=Object("credit card", 1, "this seems out of place",78)
i15=Object("old movie",20,"looks like pokemon 1",300)
i16=Object("juice box", 3, "probably not good anymore",2)
i17=Object("plate", 20, "appears to be able to hold things on its surface",1000)
i18=Object("dead mouse", 100, "pretty sure you should not keep this",30)
i19=Object("jar of pus",43, "Looks just like a blob...maybe they would like it?",98)


u1=Object("silver necklace", 100, "you could sell this if there was a shop",30)
u2=Object("bronze tube", 100, "pretty much just a burden to carry",30)
u3=Object("golden chalice", 100, "could store a liquid, or maybe your tears?",30)



kbedpan=Object("bedpan", 3, "a smelly metal bowl",2)
kbedpan.usable="yes"
torch=Object("torch", 1, "fire attatched to a stick",78)
torch.usable="yes"
crown = Object("crown", 15000, "a gold crown with many jewels",10)
crown.usable="yes"
key=Object("key",1200,"this might be useful for doing key things",12)
key.usable="yes"
key.destroy="yes"



a1=Object("paper shield",10,"will mitigate some damage",300, "shield")
shield=Object("shield",200,"will mitigate some damage",300,"shield")
good_s=Object("good shield",200,"will mitigate some damage",400,"shield")
best_s=Object("best shield",200,"will mitigate huge damage",1000,"shield")
broken_s=Object("broken shield",100,"will mitigate some damage",200, "shield")
perfect_s=Object("best shield",10000,"will mitigate massive damage",30000, "shield")

paper_weapon=Object("paper weapon",10,"will cause some damage",300, "weapon")
good_w=Object("good weapon",100,"will cause decent damage",400, "weapon")
best_w=Object("best weapon",100,"will cause huge damage",1000, "weapon")
broken_w=Object("broken weapon",100,"will cause some damage",200, "weapon")
perfect_w=Object("best weapon",10000,"will deal massive damage",30000, "weapon")







# name, value, description, power,uid, equip="item",atloc='',usable="no",world="no",destroy="no"
##################################################################################################################    
    
    
    
    
    
############################################################################################################
uncommon=itemlist("uncommon")
#UNCOMMON ITEMS

uncommon.items.append(crown)
uncommon.items.append(u1)
uncommon.items.append(u2)
uncommon.items.append(u3)





##################################################################################################################


#COMMON ITEMS

common=itemlist("common")
common.items.append(i1)
common.items.append(i2)
common.items.append(i3)
common.items.append(i4)
common.items.append(i5)
common.items.append(i6)
common.items.append(i7)
common.items.append(i8)
common.items.append(i9)
common.items.append(i10)
common.items.append(i11)
common.items.append(i12)
common.items.append(i18)
common.items.append(i19)



#############################################################################################################


#This a player/your player called the user in the code  
class players:
  def __init__(self,name,health,classs,exp=0,level=1):
    self.name=name
    self.health=health
    self.classs=classs
    self.exp=exp
    self.contents=list()
    self.damage=10 
    self.shield=None
    self.weapon=None
    self.level=level
  def __str__(self):
    return str(self.name)
#####################################################################################################################
#add players here
#uncomment namechecker and initial




name=namechecker()
user=initial(name,player)







#####################################################################################################################

MonsterList=list()

#These are the monsters in game
class monster:
  def __init__(self,name,color,classs,takes,lootTable=common,boss=False):
    self.name=name
    self.health=0
    self.color=color
    self.classs=classs
    self.damage=10
    self.contents=list()
    self.keys=""
    self.boss=boss
    self.hates=list()
    self.takes=takes
    self.starter() 
    self.healthy()
    self.lootTable=lootTable
    

  def __str__(self):
    return str(self.name)
  def __eq__(self,other):
    return self.name == other
  def starter(self):
    if self.name!="test" and self.boss==False:
      MonsterList.append(self)
  def healthy(self):    
    if self.boss==False:
      self.health=random.randint(100,200)*(user.level+random.randint(2,5))
      self.damage=random.randint(1,40)*(user.level+random.randint(0,5))
      while len(self.hates)<7:
        x=random.choice(common.items)
        if  x != self.takes:
          self.hates.append(x)
          print x
    else:
      self.health=random.randint(100,200)*(user.level+random.randint(8,12))
      self.damage=random.randint(1,40)*(user.level+random.randint(5,9))
      for item in ALLITEMS:
        self.hates.append(item)

  def looter(self):
    for i in range(random.randint(1,4)):
      self.contents.append(random.choice(self.lootTable.items))

######################################################################################################################
#Add monsters below

blob=monster("blob","yellow","warrior",i19)
dragon=monster("dragon","yellow","warrior",i11)
high_wizard=monster("high wizard","black","warrior",i2)
user.contents.append(i1)
#boss

bosslist=list()
Fbosslist=list()

class Boss(monster):
  def __init__(self,name,color,classs,takes):
    monster.__init__(self,name,color,classs,takes,uncommon,True)
    self.contents.append(key)
    self.bossStarter()
  def __str__(self):
    return monster.__str__(self)
  def bossStarter(self):
    bosslist.append(self)


b1=Boss("Giant Gnarlk","black", "warrior",i1)
b2=Boss("Werewolf","pink","warrior",i1)
b3=Boss("Angry Miner","red","warrior",i1)
b4=Boss("Troll","camo","warrior",i1)
b5=Boss("Kirbal","purple","warrior",i1)
b6=Boss("Deranged Prisoner","green","warrior",i1)
b7=Boss("Mutant Gorilla","black","warrior",i1)




class FinalBoss(monster):
  def __init__(self,name,color,classs,takes):
    monster.__init__(self,name,color,classs,takes,uncommon,True)
    self.bossStarter()
  def __str__(self):
    return monster.__str__(self)
  def bossStarter(self):
    Fbosslist.append(self)
  def killed(self):
    print("YOU HAVE WON THE GAME!!!")

f1=FinalBoss("EECS Instructor","gray","warrior",i1)


######################################################################################################################




############################################################################################
class floor:
  def __init__(self,name,rooms=list()):
    self.name=name
    self.rooms=rooms
  def __str__(self):
    return str(self.name)

############################################################################################################
level1= floor("ground level")

#Your room object
class Room:
  def __init__(self, name, x, y, description="Just a plain wall"):
    self.name=name
    self.north=None
    self.east=None
    self.west=None
    self.south=None
    self.description=description
    self.contents=list()
    self.baddies=None
    self.used=list()
    self.usables=list()
    self.x=x
    self.y=y
    self.map_x = (x - 9) * 48
    self.map_y = (y - 6) * 48
    self.visited=False
    self.start_up()
    self.key=i1
  def __str__(self):
    return str(self.name)
  def visitedFun(self):
    self.visited=True
  def start_up(self):
    level1.rooms.append(self)
    if self.name.lower() in ["hallway","room"]:
      if random.randint(0,5)>3:
        self.baddies=copy.deepcopy(random.choice(MonsterList))
        self.baddies.healthy()
        self.baddies.looter()
  def makekey(self,x,y,atloc,world):
    self.key=copy.deepcopy(key)
    self.key.x=x
    self.key.y=y
    self.key.atloc=atloc
    self.key.world=world   
    self.usables.append(self.key)
############################################################################################################
#Add rooms Below

castle_entrance=Room("The Castle Entrance", 10, 10, "the starting place of the dungeon")
castle_entrance.contents.append(key)

cell1=Room("Prison Cell", 10, 16, "just your average cell" )

cell2=Room("Prison Cell", 9, 15, "just your average cell")

cell3=Room("Prison Cell", 9, 16, "just your average cell")

hallway1=Room("Hallway", 11, 8, "links other rooms, and may contain a torch or two")

hallway2=Room("Hallway", 11, 9, "links other rooms, and may contain a torch or two")

hallway3=Room("Hallway", 11, 10, "links other rooms, and may contain a torch or two")

hallway4=Room("Hallway", 11, 11, "links other rooms, and may contain a torch or two")

hallway5=Room("Hallway", 11, 12, "links other rooms, and may contain a torch or two")

hallway6=Room("Hallway", 12, 10, "links other rooms, and may contain a torch or two")

hallway7=Room("Hallway", 13, 10, "links other rooms, and may contain a torch or two")

hallway8=Room("Hallway", 14, 8, "links other rooms, and may contain a torch or two")

hallway9=Room("Hallway", 14, 9, "links other rooms, and may contain a torch or two")

hallway10=Room("Hallway", 14, 10, "links other rooms, and may contain a torch or two")

hallway11=Room("Hallway", 14, 11, "links other rooms, and may contain a torch or two")

hallway12=Room("Hallway", 14, 12, "links other rooms, and may contain a torch or two")

hallway13=Room("Hallway", 15, 10, "links other rooms, and may contain a torch or two")

hallway14=Room("Hallway", 16, 10, "links other rooms, and may contain a torch or two")

hallway15=Room("Hallway", 17, 10, "links other rooms, and may contain a torch or two")

hallway16=Room("Hallway", 17, 11, "links other rooms, and may contain a torch or two")

hallway17=Room("Hallway", 17, 12, "links other rooms, and may contain a torch or two")

hallway18=Room("Hallway", 17, 13, "links other rooms, and may contain a torch or two")

hallway19=Room("Hallway", 17, 14, "links other rooms, and may contain a torch or two")

hallway20=Room("Hallway", 17, 15, "links other rooms, and may contain a torch or two")

hallway21=Room("Hallway", 17, 16, "links other rooms, and may contain a torch or two")

hallway22=Room("Hallway", 17, 17, "links other rooms, and may contain a torch or two")

hallway23=Room("Hallway", 17, 18, "links other rooms, and may contain a torch or two")

hallway24=Room("Hallway", 17, 19, "links other rooms, and may contain a torch or two")

hallway25=Room("Hallway", 16, 19, "links other rooms, and may contain a torch or two")

hallway26=Room("Hallway", 15, 19, "links other rooms, and may contain a torch or two")

hallway27=Room("Hallway", 15, 20, "links other rooms, and may contain a torch or two")

hallway28=Room("Hallway", 15, 21, "links other rooms, and may contain a torch or two")

hallway34=Room("Hallway", 13, 20, "links other rooms, and may contain a torch or two")

hallway35=Room("Hallway", 13, 21, "links other rooms, and may contain a torch or two")

hallway41=Room("Hallway", 14, 19, "links other rooms, and may contain a torch or two")

hallway42=Room("Hallway", 13, 19, "links other rooms, and may contain a torch or two")

hallway43=Room("Hallway", 18, 14, "links other rooms, and may contain a torch or two")

hallway44=Room("Hallway", 19, 14, "links other rooms, and may contain a torch or two")
hallway44.baddies=random.choice(bosslist)

hallway45=Room("Hallway", 20, 14, "links other rooms, and may contain a torch or two")

hallway46=Room("Hallway", 21, 14, "links other rooms, and may contain a torch or two")

hallway47=Room("Hallway", 22, 14, "A mystical item calls you nearby. '{0}? {0}, is that you?' ".format(user.name))

hallway49=Room("Hallway", 18, 16, "links other rooms, and may contain a torch or two")

hallway50=Room("Hallway", 19, 16, "links other rooms, and may contain a torch or two")

hallway51=Room("Hallway", 20, 16, "links other rooms, and may contain a torch or two")

hallway52=Room("Hallway", 21, 16, "links other rooms, and may contain a torch or two")

hallway53=Room("Hallway", 22, 16, "A mystical item calls you nearby. '{0}? {0}, is that you?' ".format(user.name))

goodWeapon=Room("Hidden Armory", 1900, 1500, "A grand weapon sits in the middle of the room")
goodWeapon.description="A grand weapon sits in the middle of the room"
goodWeapon.map_x=(19 - 9) * 48
goodWeapon.map_y=(15 - 6) * 48
goodWeapon.contents.append(good_w)
hallway44.makekey(19,15,goodWeapon,"yes")
hallway50.makekey(19,15,goodWeapon,"yes")




room1=Room("Room", 11, 13)
room1.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))


room2=Room("Room", 11, 7)
room2.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))


room20=Room("Secret Room", 600, 600)
room20.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))
room20.map_x=(10 - 9) * 48
room20.map_y=(13 - 6) * 48
room1.makekey(10,13,room20,"yes")


room3=Room("Room", 12, 9)
room3.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))


room4=Room("Room", 12, 11)
room4.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))


room5=Room("Room", 13, 7)
room5.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))

room6=Room("Room", 14, 6)
room6.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))


room7=Room("Room", 15, 7)
room7.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))


room8=Room("Room", 13, 12)
room8.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))


room9=Room("Room", 14, 13)
room9.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))


room10=Room("Room", 15, 12)
room10.description="might hold a secret or {0}".format(random.choice(["two","three","four","five","six","none","not a secret, that is the question"]))


boss1=Room("Boss Room", 13, 22)
boss1.description="A boss lies in wait"
boss1.baddies=random.choice(bosslist)

boss2=Room("Boss Room", 1300, 2300)
boss2.description="A boss lies in wait"
boss2.map_x=(13 - 9) * 48
boss2.map_y=(23 - 6) * 48
boss1.makekey(13,23,boss2,"yes")
boss2.baddies=random.choice(bosslist)


boss3=Room("Boss Room", 1300, 2400)
boss3.description="A boss lies in wait"
boss3.map_x=(13 - 9) * 48
boss3.map_y=(24 - 6) * 48
boss2.makekey(13,24,boss3,"yes")
boss3.baddies=random.choice(bosslist)

boss4=Room("Boss Room", 13, 2500)
boss4.description="A boss lies in wait"
boss4.map_x=(13 - 9) * 48
boss4.map_y=(25 - 6) * 48
boss3.makekey(13,25,boss4,"yes")
boss4.baddies=random.choice(bosslist)

boss5=Room("Boss Room", 13, 2600)
boss5.description="A boss lies in wait"
boss5.map_x=(13 - 9) * 48
boss5.map_y=(26 - 6) * 48
boss4.makekey(13,26,boss5,"yes")
boss5.baddies=random.choice(bosslist)

boss6=Room("Boss Room", 15, 22)
boss6.description="A boss lies in wait"
boss6.x=15
boss6.y=22
boss6.baddies=random.choice(bosslist)

goodShield=Room("Hidden Armory", 1400, 2200, "A grand weapon sits in the middle of the room")
goodShield.description="A grand shield sits in the middle of the room"
goodShield.map_x=(14 - 9) * 48
goodShield.map_y=(22 - 6) * 48
goodShield.contents.append(good_s)
boss1.makekey(14,22,goodShield,"yes")
boss6.makekey(14,22,goodShield,"yes")







boss7=Room("Boss Room", 15, 2300)
boss7.description="A boss lies in wait"
boss7.map_x=(15 - 9) * 48
boss7.map_y=(23 - 6) * 48
boss6.makekey(15,23,boss7,"yes")
boss7.baddies=random.choice(bosslist)

boss8=Room("Boss Room", 15, 2400)
boss8.description="A boss lies in wait"
boss8.map_x=(15 - 9) * 48
boss8.map_y=(24 - 6) * 48
boss7.makekey(15,24,boss8,"yes")
boss8.baddies=random.choice(bosslist)

boss9=Room("Boss Room", 15, 2500)
boss9.description="A boss lies in wait"
boss9.map_x=(15 - 9) * 48
boss9.map_y=(25 - 6) * 48
boss8.makekey(15,25,boss9,"yes")
boss9.baddies=random.choice(bosslist)

boss10=Room("Boss Room", 15, 2600)
boss10.description="A boss lies in wait"
boss10.map_x=(15 - 9) * 48
boss10.map_y=(26 - 6) * 48
boss9.makekey(15,26,boss10,"yes")
boss10.baddies=random.choice(bosslist)

boss11=Room("Boss Room", 14, 2600)
boss11.description="The Final boss lies in wait {0}. You had better be prepared".format(user.name)
boss11.map_x=(14 - 9) * 48
boss11.map_y=(26 - 6) * 48
boss10.makekey(14,26,boss11,"yes")
boss5.makekey(14,26,boss11,"yes")
boss11.baddies=random.choice(Fbosslist)

treasureRoom1=Room("Treasure Room", 900, 1700)
treasureRoom1.description="Contains a vast amount of treasure"
treasureRoom1.map_x=(9 - 9) * 48
treasureRoom1.map_y=(17 - 6) * 48
cell3.makekey(9,17,treasureRoom1,"yes")


cave1=Room("Cave", 10, 14)
cave1.description=("Seems pretty damp")


prison1=Room("Prison", 10, 15)
prison1.description=("Seems pretty cramped")


best_room1=Room("Altar of a grand Weapon", 2200, 1500)
best_room1.description=("Emense power eminates from the room...and possibly else where?")
best_room1.map_x=(22 - 9) * 48
best_room1.map_y=(15 - 6) * 48
best_room1.contents.append(best_w)
hallway47.makekey(22,15,best_room1,"yes")
hallway53.makekey(22,15,best_room1,"yes")

best_room2=Room("Altar of a grand shield", 2300, 1500)
best_room2.description=("Emense power eminates from the room...and possibly else where?")
best_room2.map_x=(23 - 9) * 48
best_room2.map_y=(15 - 6) * 48
best_room2.contents.append(best_s)
best_room1.makekey(23,15,best_room2,"yes")






#####################################################################################
class cause_n_effect:
  def __init__(self,name,effect,locational,uses=None):
    self.name=name
    self.effect=effect
    self.changer=list()
    self.uses=uses
    self.world="No"
    self.locational=locational
    self.starter()
  def __str__(self):
    return str(self.name)
  def __eq__(self,other):
    return self.name == other
  def starter(self):
    print self.locational
    self.locational.usables.append(self)
    print self.locational.usables
    for item in ALLITEMS:
      if item.name == self.name:
        w1=copy.deepcopy(item)
        self.locational.contents.append(w1)
        break
    if self.uses != None:
      for item in ALLITEMS:
        if item.name == self.uses:
          print item.name
          self.changer.append(item)

#            All Cause and Effect for rooms go here
#             format= the item you want to affect it, the description when used, the location you can use it, what drops
bedpan_massacre= cause_n_effect("bedpan","you just spilled feces all over the place...gross, but effective. Oh look,{0} a key dropped".format(name),castle_entrance,"key")





#These are all of the commands in the game
commandlist = dict()

commandlist['points']="type points to get your current points"
commandlist['go']="type go and then a cardinal direction"
commandlist['look']="type look and then a cardinal direction (n,s,e,w), or around to look around"
commandlist['quit']="type quit and then follow the directions to quit"
commandlist['about']="type about [item] and then what object you want to learn about"
commandlist['bag']="type bag to see whats in your bag"
commandlist['drop']="type drop [item] to drop the item from you bag"
commandlist['equip']="type equip [item] to equip whats in your bag"
commandlist['unequip']="type unequip [item] to take off what you are wearing"
commandlist['help']="type help [command] learn about command"
commandlist['attack']="type attack [monster] to attack monster"
commandlist['grab']="type grab [item] to take an item and place it in your bag"
commandlist['use']="type use [item] to use an item that is in your bag"

print("\ntype help for a list of all commands\n")


#Starting location:
location= castle_entrance
castle_entrance.visitedFun()
#to test bag functionality  
user.weapon=perfect_w
user.shield=perfect_s

#This is really the only executed code for the whole game, its long because of the quitting functionality
#You can only save your score if you quit properly
#that means typing the word quit and then no

for i in range(40):
  print

#import fixer as f
user.contents.append(i19)
while not response  == "dfhsergghj":
  response=raw_input("\nCommand: \n")
  for i in range(40):
    print
  if response == "quit":
    ask_ok("You are about to quit, type no to quit")
    if player["relive"]==0:
      response="dfhsergghj"
#  try:
  holder=(response.split())
  for i in range(len(holder)):
    if i>1:
      holder[1]+=" "+str(holder[i])
  print holder
  mapping()
  what_you_do(holder)
  if holder[0] not in ["look","l"]:
    mapping()
    what_you_do(['l','a'])
#  except:

#    print("type a command please")

#f.file_fixer()


'''
if __name__== "__main__" :
  import doctest
  doctest.testmod()

'''


